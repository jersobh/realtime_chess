(function(e){function t(t){for(var o,a,i=t[0],c=t[1],u=t[2],p=0,f=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},s=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"231f":function(e,t,n){},2625:function(e,t,n){"use strict";var o=n("b58e"),r=n.n(o);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],a=(n("6b54"),n("a481"),n("66f9")),i=(n("1ec6"),n("cc7d")),c=n.n(i),u={name:"app",components:{chessboard:a["chessboard"]},watch:{positionInfo:function(e,t){var n=this;console.log("new move"),e!==t&&(console.log(e),n.socket.send(JSON.stringify({fen:e.fen})))}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null,uuid:null}},methods:{uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))},showInfo:function(e){this.positionInfo=e},resetGame:function(){if(!confirm("Want to promote to rook? Queen by default"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){},mounted:function(){}},l=u,p=(n("034f"),n("2877")),f=Object(p["a"])(l,r,s,!1,null,null,null),m=f.exports,d=n("8c4f"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"room"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.room_name,expression:"room_name"}],staticClass:"btn",attrs:{type:"text",placeholder:"Digite o nome da sala"},domProps:{value:e.room_name},on:{input:function(t){t.target.composing||(e.room_name=t.target.value)}}}),e._v(" "),n("router-link",{staticClass:"btn",attrs:{to:"/"+e.room_name}},[e._v("Entrar")]),n("table",{staticClass:"rooms_table"},[e._m(0),n("tbody",e._l(e.rooms,(function(t,o){return n("tr",{key:o},[n("td",[e._v(" "+e._s(o)+" ")]),n("td",[e._v(" "+e._s(t.sessions.length)+" ")]),n("td",[n("router-link",{staticClass:"btn",attrs:{to:"/"+o}},[e._v("Join")])],1)])})),0)])],1)},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v(" Room ")]),n("th",[e._v(" Users ")]),n("th")])])}],h={name:"app",watch:{positionInfo:function(e,t){var n=this;e!==t&&n.socket.send(JSON.stringify({fen:e.fen}))}},data:function(){return{currentFen:"",positionInfo:null,player:"white",socket:null,rooms:null,room_name:"",ws_server:"/ws"}},methods:{showInfo:function(e){var t=this;t.positionInfo=e},resetGame:function(){if(!confirm("Want to promote to rook? Queen by default"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){},mounted:function(){var e=this;this.socket=new c.a(this.ws_server),this.socket.onopen=function(){setInterval((function(){e.socket.send(JSON.stringify({type:"get_rooms"}))}),2e3)},e.socket.onmessage=function(t){var n;n="string"==typeof t.data?JSON.parse(t.data):t.data,e.rooms=n},e.socket.onclose=function(){e.socket=new c.a(this.ws_server)}}},_=h,g=(n("2625"),Object(p["a"])(_,y,v,!1,null,null,null)),b=g.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"game"}},[n("div",{attrs:{id:"board"}},[n("div",{attrs:{id:"table"}},["watcher"==e.player.role?n("span",[e._v("You've joined as watcher")]):e._e(),e.positionInfo&&e.positionInfo.turn!==e.player.role?n("p",[e._v("Now it's "),n("span",{staticStyle:{}},[e._v(e._s(e.positionInfo.turn)+"'s ")]),e._v(" turn")]):e._e(),e.positionInfo&&e.positionInfo.turn==e.player.role?n("p",[e._v("It's "),n("span",{staticStyle:{color:"#FF0000"}},[e._v("your")]),e._v(" turn")]):e._e(),"white"==e.player.role?n("chessboard",{staticClass:"chessboard",attrs:{fen:e.currentFen,onPromotion:e.promote},on:{onMove:e.showInfo}}):e._e(),"black"==e.player.role?n("chessboard",{staticClass:"chessboard",attrs:{orientation:"black",fen:e.currentFen,onPromotion:e.promote},on:{onMove:e.showInfo}}):e._e(),"watcher"==e.player.role?n("chessboard",{staticClass:"chessboard",staticStyle:{"pointer-events":"none"},attrs:{fen:e.currentFen}}):e._e()],1),"watcher"!==e.player.role?n("div",{attrs:{id:"chat-box"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticClass:"msg_area",attrs:{rows:"4",cols:"30",placeholder:"Digite a mensagem"},domProps:{value:e.msg},on:{input:function(t){t.target.composing||(e.msg=t.target.value)}}}),n("br"),n("button",{staticClass:"btn",on:{click:function(t){return e.sendMessage()}}},[e._v("Send")])]):e._e(),n("div",{staticClass:"message-board",staticStyle:{"max-height":"100px","overflow-y":"scroll"}},e._l(e.messages,(function(t){return n("div",{key:t.player},["player_message"==t.type&&t.player==e.player.id?n("span",{staticClass:"me"},[e._v(" "+e._s(t.time)+": "+e._s(t.msg)+" ")]):e._e(),"player_message"==t.type&&t.player!==e.player.id?n("span",{staticClass:"remote"},[e._v(" "+e._s(t.time)+": "+e._s(t.msg)+" ")]):e._e(),"sys_message"==t.type?n("span",{staticClass:"sys_message"},[e._v(" "+e._s(t.msg)+" ")]):e._e(),n("br"),n("br")])})),0)])])},x=[],k={name:"app",components:{chessboard:a["chessboard"]},data:function(){return{currentFen:"",positionInfo:null,player:"white",username:"",msg:"",messages:[],socket:null,ws_server:"/ws"}},methods:{sendMessage:function(){var e=this;if(""==e.msg.length)return!1;var t=new Date;e.socket.send(JSON.stringify({type:"new_message",player_id:e.player.id,room:e.room,msg:e.msg,time:t.toLocaleTimeString()})),this.msg=""},showInfo:function(e){var t=this;t.socket&&t.socket.send(JSON.stringify({type:"new_move",player:t.player.role,room:t.room,fen:e.fen})),this.positionInfo=e,t.positionInfo.turn==t.player.role?document.getElementById("table").style.pointerEvents="auto":document.getElementById("table").style.pointerEvents="none"},resetGame:function(){if(!confirm("Want to reset the game?"))return!1;this.currentFen=""},promote:function(){return confirm("Want to promote to rook? Queen by default")?"r":"q"}},created:function(){this.room=this.$route.params.room_name},mounted:function(){var e=this;this.socket=new c.a(this.ws_server,"websocket",{debug:!0}),this.socket.onopen=function(){setInterval((function(){e.socket.send(JSON.stringify({type:"keepalive"}))}),3e3),e.socket.send(JSON.stringify({type:"new_player",room:e.room}))},e.socket.onmessage=function(t){var n;n="string"==typeof t.data?JSON.parse(t.data):t.data,"set_player"==n.type&&(e.player=n),"update"==n.type&&(e.currentFen=n.fen),"sys_message"==n.type&&e.messages.unshift({type:"sys_message",msg:n.text}),"message"==n.type&&e.messages.unshift({type:"player_message",player:n.player_id,time:n.time,msg:n.text})},e.socket.onclose=function(){e.socket=new c.a(this.ws_server,"websocket",{debug:!0})}}},I=k,O=(n("7975"),Object(p["a"])(I,w,x,!1,null,null,null)),S=O.exports;o["a"].use(d["a"]);var j=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"room",component:b},{path:"/:room_name",name:"play",component:S}]});o["a"].config.productionTip=!1,new o["a"]({router:j,render:function(e){return e(m)}}).$mount("#app")},7975:function(e,t,n){"use strict";var o=n("231f"),r=n.n(o);r.a},"85ec":function(e,t,n){},b58e:function(e,t,n){}});
//# sourceMappingURL=app.c10c05b0.js.map